"use strict";(self.webpackChunkreact_lesson_1=self.webpackChunkreact_lesson_1||[]).push([[787],{8787:function(e,n,r){r.r(n),r.d(n,{default:function(){return d}});var t=r(9439),s=r(9867),u="ChatPage_photoSize__zsDD0",c=r(4953),i=r(4894),o=r(2834),a=function(){var e=(0,c.I0)(),n=(0,c.v9)((function(e){return e.chat.status}));return(0,s.useEffect)((function(){return e((0,i.WE)()),function(){e((0,i.R7)())}}),[e]),(0,o.jsxs)("div",{children:["error"===n&&(0,o.jsx)("div",{children:"Some error occurred. Please refresh the page"}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l,{}),(0,o.jsx)(f,{})]})]})},l=function(){var e=(0,s.useRef)(null),n=(0,c.v9)((function(e){return e.chat.messages})),r=(0,s.useState)(!1),u=(0,t.Z)(r,2),i=u[0],a=u[1];return(0,s.useEffect)((function(){i&&setTimeout((function(){var n;null===(n=e.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}),200)}),[n]),(0,o.jsxs)("div",{style:{height:"400px",overflowY:"auto"},onScroll:function(e){var n=e.currentTarget,r=n.scrollHeight-n.scrollTop;Math.abs(r-n.clientHeight)<300?i||a(!0):i&&a(!1)},children:[n.map((function(e,n){return(0,o.jsx)(h,{message:e},e.id)})),(0,o.jsx)("div",{ref:e})]})},h=s.memo((function(e){var n=e.message;return(0,o.jsxs)("div",{className:u,children:[(0,o.jsx)("img",{src:n.photo,alt:"icon"}),(0,o.jsx)("b",{children:n.userName}),(0,o.jsx)("br",{}),n.message,(0,o.jsx)("hr",{})]})})),f=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e);var n=(0,s.useState)(""),r=(0,t.Z)(n,2),u=r[0],a=r[1],l=(0,c.I0)(),h=(0,c.v9)((function(e){return e.chat.status}));return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)("textarea",{onChange:function(e){return a(e.currentTarget.value)}})}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{disabled:"ready"!==h,onClick:function(){u&&(l((0,i.bG)(u)),a(""))},children:"Send"})})]})},d=function(){return(0,o.jsx)("div",{children:(0,o.jsx)(a,{})})}}}]);
//# sourceMappingURL=787.8ef2d0d9.chunk.js.map